if('undefined'===typeof(jQuery)){jQuery=require('./lib/jquery.min.js');}
if('undefined'!==typeof(module)){module.exports.WordSearch=WordSearch;}
function WordSearch(){}
WordSearch.prototype.init=function(default_file_path){this.PAGE_LOAD=true;this.WORD_GRID={};this.WORD_GRID_ROWS=[];this.WORDS_TO_MATCH=[];this.WORDS_TO_MATCH_TRIMMED=[];this._IS_ADVANCED_UPLOAD=this.draggable_exists();this.UPLOADED_FILE_OBJ=null;this._LENGTH_OF_LONGEST_WORD=0;this._LENGTH_OF_SHORTEST_WORD=0;this._MAX_DIAGONAL_LENGTH=0;this._GRID_ROW_COUNT=0;this._GRID_ROW_LENGTH=0;this._DEFAULT_FILE_PATH=('undefined'!==typeof(default_file_path)?default_file_path:'data/word-search.txt');var self=this;this.loaded(self);};WordSearch.prototype.loaded=function(self){self.get_form_data;jQuery('#word_search_form_file_upload').on('change',function(e){var files=e.currentTarget.files;self.update_form_file(files,self);});var form_method_current=jQuery('#form_method').val();var form_method_default=jQuery('#form_method .default_option').val();if(form_method_current!==form_method_default){jQuery('#form_method').val(form_method_default);}
jQuery('#word_search_form #form_method').on('change',{'self':self},self.change_form_display);jQuery('.spoiler').click(function(e){var spoiler=e.currentTarget;if(!jQuery(spoiler).hasClass('spoil_toggled')){jQuery(spoiler).addClass('spoil_toggled');jQuery(spoiler).siblings('.spoiler_target').show();}else{jQuery(spoiler).removeClass('spoil_toggled');jQuery(spoiler).siblings('.spoiler_target').hide();}
jQuery(spoiler).children('.spoiler_container').toggle();});jQuery('#submit').on('click',{'self':self},self.get_form_data);};WordSearch.prototype.get_file_data=function(url,callback,self){jQuery.ajax({url:url,success:function(data){callback(data,'file',self);}});};WordSearch.prototype.get_form_data=function(e){e.preventDefault();jQuery('#submit').prop('disabled',true).val('Loading...');var self=e.data.self;var form_method=jQuery('#word_search_form #form_method').val();if('upload'===form_method){var the_file=self.UPLOADED_FILE_OBJ;if(null!==the_file){var reader=new FileReader();jQuery(reader).on('loadend',function(){self.reset_display(reader.result,'file',self);});reader.readAsText(the_file);}else{self.reset_display('','file',self);}}else if('manual'===form_method){var word_grid_val=jQuery('#word_search_form_textarea_grid').val();var word_list_val=jQuery('#word_search_form_textarea_list').val();var new_data=[word_grid_val,word_list_val];self.reset_display(new_data,'form',self);}};WordSearch.prototype.map_to_obj=function(data,origin){var obj={};if('file'===origin){var split_data=data.split("\n\n===<BREAK>===\n\n");obj={'word_grid':split_data[0],'word_list':split_data[1]};}else if('form'===origin){obj={'word_grid':data[0],'word_list':data[1]};}
return obj;};WordSearch.prototype.reset_display=function(raw_data,origin,self){var input_obj=self.map_to_obj(raw_data,origin);self.clear_alerts();var errors_array=self.validate_data(input_obj,origin,self);if(0!==errors_array.length){self.error_handler(errors_array,self);}else{var trimmed_data_obj=self.trim_inputs(input_obj);self.prepare_search(trimmed_data_obj,self);self.create_display();self.search_for_words();jQuery('li.found').on('click',self.highlight_match);self.jump_to_id('top');}
jQuery('#submit').prop('disabled',false).val('FIND BAD WORDS!');};WordSearch.prototype.sort_object_array=function(a,b){return b.word.length-a.word.length;};WordSearch.prototype.find_obj_in_arr=function(arr,prop,value){var index=-1;if('undefined'!==typeof(arr)||'undefined'!==typeof(prop)||'undefined'!==typeof(value)){for(var i=0;i<arr.length;i++){if(value===arr[i][prop]){index=i;break;}}}
return index;};WordSearch.prototype.prepare_search=function(input_obj,self){var word_grid=input_obj.word_grid;var word_list=input_obj.word_list;var word_grid_rows=word_grid.split('\n');self.WORD_GRID={};self.WORD_GRID_ROWS=[];for(var i=0;i<word_grid_rows.length;i++){var word_grid_chars=word_grid_rows[i].split(' ');self.WORD_GRID[i]=word_grid_chars;self.WORD_GRID_ROWS[i]=word_grid_chars.join(' ').replace(/[^\S\n]+/g,'');}
self.WORDS_TO_MATCH=[];self.WORDS_TO_MATCH_TRIMMED=[];var words_to_match_array=word_list.split("\n");jQuery.each(words_to_match_array,function(i,word){self.WORDS_TO_MATCH.push({'id':i,'word':word});self.WORDS_TO_MATCH_TRIMMED.push({'id':i,'word':word.replace(/[^\S\n]+/g,'')});});var sorted_words=self.WORDS_TO_MATCH;sorted_words.sort(self.sort_object_array);var sorted_words_trimmed=self.WORDS_TO_MATCH_TRIMMED;sorted_words_trimmed.sort(self.sort_object_array);self._LENGTH_OF_LONGEST_WORD=sorted_words_trimmed[0].word.length;self._LENGTH_OF_SHORTEST_WORD=sorted_words_trimmed[sorted_words_trimmed.length-1].word.length;self._GRID_ROW_COUNT=Object.keys(self.WORD_GRID).length;self._GRID_ROW_LENGTH=self.WORD_GRID[0].length;self._MAX_DIAGONAL_LENGTH=Math.min(self._GRID_ROW_COUNT,self._GRID_ROW_LENGTH);};WordSearch.prototype.trim_inputs=function(input_obj){if('undefined'===typeof(input_obj.word_grid)||'undefined'===typeof(input_obj.word_list)){return{'word_grid':'','word_list':''};}
var word_grid=input_obj.word_grid;var word_list=input_obj.word_list;var trimmed_word_grid=word_grid.trim().replace(/([^\S\n]*[\'\"\-]+[^\S\n]*)+/g,'').replace(/(\n){2,}/g,'\n').replace(/\s+(?=\n)/g,'').replace(/\n[^\S\n]+(?=[a-zA-Z])/g,'\n').replace(/[^\S\n]+(?=[a-zA-Z])/g,' ').replace(/([a-zA-Z]){2,}/g,function(match){return match.split('').join(' ');}).toUpperCase();var trimmed_word_list=word_list.trim().replace(/([^\S\n]*[\'\"\-]+[^\S\n]*)+/g,'').replace(/(\n){2,}/g,'\n').replace(/\s+(?=\n)/g,'').replace(/\n[^\S\n]+(?=[a-zA-Z])/g,'\n').replace(/[^\S\n]+(?=[a-zA-Z])/g,' ').toUpperCase();return{'word_grid':trimmed_word_grid,'word_list':trimmed_word_list};};WordSearch.prototype.validate_data=function(input_obj,origin,self){var error_array=[];var trimmed_data_obj=self.trim_inputs(input_obj);var word_grid=trimmed_data_obj.word_grid;var word_list=trimmed_data_obj.word_list;var row_array=word_grid.split("\n");if('undefined'===typeof(trimmed_data_obj)||'undefined'===typeof(word_grid)||'undefined'===typeof(word_list)||''===word_grid||''===word_list){if('file'===origin){error_array.push({'field_type':'file','error_type':'invalid'});return error_array;}else if('form'===origin){if('undefined'===typeof(word_grid)||''===word_grid){error_array.push({'field_type':'grid','error_type':'empty'});}
if('undefined'===typeof(word_list)||''===word_list){error_array.push({'field_type':'list','error_type':'empty'});}}}
if(word_grid.match(/[^0-9a-zñáéíóúü\s]+$/i)){error_array.push({'field_type':'grid','error_type':'non-alpha'});}
if(word_list.match(/[^0-9a-zñáéíóúü\s]+$/i)){error_array.push({'field_type':'list','error_type':'non-alpha'});}
for(var i=0;i<row_array.length;i++){if(row_array[i].length!==row_array[0].length){error_array.push({'field_type':'grid','error_type':'row-length'});break;}}
return error_array;};WordSearch.prototype.error_handler=function(error_array,self){if(0!==error_array.length){for(var i=0;i<error_array.length;i++){var error_obj=error_array[i];var error_msg='';switch(error_obj.field_type){case 'grid':if('row-length'===error_obj.error_type){error_msg='There is an issue with the grid field! Make sure '+
'that the grid rows are all the same length.';jQuery('#word_search_form label[for="word_grid"]').addClass('error');}else if('empty'===error_obj.error_type){error_msg='The grid field must be filled.';jQuery('#word_search_form label[for="word_grid"]').addClass('error');}else if('non-alpha'===error_obj.error_type){error_msg='The grid field may only contain '+
'alphabetical characters, spaces, dashes, '+
'apostrophes, and quotes.';jQuery('#word_search_form label[for="word_grid"]').addClass('error');}
break;case 'list':if('empty'===error_obj.error_type){error_msg='The list field must be filled.';jQuery('#word_search_form label[for="word_list"]').addClass('error');}else if('non-alpha'===error_obj.error_type){error_msg='The list field may only contain '+
'alphabetical characters, spaces, dashes, '+
'apostrophes, and quotes.';jQuery('#word_search_form label[for="word_list"]').addClass('error');}
break;case 'file':if('invalid'===error_obj.error_type){error_msg='The input is invalid. Please submit a file with the proper '+
'formatting (see below for formatting rules).';jQuery('#word_search_form label[for="word_file"]').addClass('error');}
break;}
jQuery('#word_search_form #alert_list').append('<li>'+error_msg+'</li>');jQuery('#word_search_form #alert_area').show();self.jump_to_id('alert_area');}}};WordSearch.prototype.highlight_match=function(e){var index_of_match=jQuery(e.currentTarget).attr('data-match-index');var letter_elem=jQuery('#word_table_container .table_data').eq(index_of_match);var li_with_index_selector='li.found[data-match-index="'+index_of_match+'"]';var multiple_items_exist=(jQuery(li_with_index_selector).length>1?true:false);if(!jQuery(letter_elem).hasClass('highlight_match')){jQuery(letter_elem).addClass('highlight_match');jQuery(e.currentTarget).children().addClass('highlight_toggle');if(multiple_items_exist){jQuery(e.currentTarget).siblings(li_with_index_selector).children().addClass('highlight_toggle');}}else{jQuery(letter_elem).removeClass('highlight_match');jQuery(li_with_index_selector).children().removeClass('highlight_toggle');}};WordSearch.prototype.found_word=function(row,column,word_length,match_type){for(var i=0;i<word_length;i++){switch(match_type){case 'row':jQuery('#word_table_container td').eq((column+i)+this._GRID_ROW_LENGTH*row).addClass('row_match');break;case 'column':jQuery('#word_table_container td').eq(column+this._GRID_ROW_LENGTH*(row+i)).addClass('column_match');break;case 'diagonal-right':jQuery('#word_table_container td').eq((column+i)+this._GRID_ROW_LENGTH*(row+i)).addClass('diagonal_match');break;case 'diagonal-left':jQuery('#word_table_container td').eq(column+(this._GRID_ROW_LENGTH*(row+i)-i)).addClass('diagonal_match');break;default:return;}}};WordSearch.prototype.remove_word_from_list=function(word_id,row,col){var match_index=col+this._GRID_ROW_LENGTH*row;var untrimmed_index=this.find_obj_in_arr(this.WORDS_TO_MATCH,'id',word_id);var trimmed_index=this.find_obj_in_arr(this.WORDS_TO_MATCH_TRIMMED,'id',word_id);var list_item=jQuery('#word_list_container li:contains('+this.WORDS_TO_MATCH[untrimmed_index].word+')').addClass('found').attr('data-match-index',match_index);this.WORDS_TO_MATCH.splice(untrimmed_index,1);this.WORDS_TO_MATCH_TRIMMED.splice(trimmed_index,1);};WordSearch.prototype.search_for_words=function(){console.log('################## Searching...');var initial_word_count=this.WORDS_TO_MATCH_TRIMMED.length;var start_time=Date.now();this.search_row();this.search_column();this.search_diagonal();var elapsed_time=Date.now()-start_time;var words_found_count=initial_word_count-this.WORDS_TO_MATCH_TRIMMED.length;console.log('################## All done! ('+
words_found_count+'/'+initial_word_count+
' found, '+elapsed_time+'ms)');if(words_found_count==0){if(this.PAGE_LOAD==true){this.PAGE_LOAD=false;}else{swal({title:"NO BAD WORDS FOUND",text:"We searched the puzzle for over 40 common 'bad' words that may have unintentionally been created when adding random letters to your puzzle.  Great News!  No bad words were found.  You may add words to search for using the 'Bad Word Filter' in the blue menu",type:"success"});}}else{jQuery("#main_content").show();swal({title:"Potential BAD WORDS Found",text:"We did a cursory search and found that possibly undesirable 'bad' word(s) may have been unintentionally generated when adding random letters to your puzzle.  For more specifics and how to fix, please click the 'Bad Word Filter' in the blue menu",type:"warning"});}};WordSearch.prototype.search_row=function(){for(var i=0;i<this.WORD_GRID_ROWS.length;i++){for(var x=0;x<this.WORDS_TO_MATCH_TRIMMED.length;x++){var word_x=this.WORDS_TO_MATCH_TRIMMED[x].word;var word_id_x=this.WORDS_TO_MATCH_TRIMMED[x].id;var index_of_word=this.WORD_GRID_ROWS[i].indexOf(word_x);if(-1!==index_of_word){var untrimmed_index_x=this.find_obj_in_arr(this.WORDS_TO_MATCH,'id',word_id_x);var untrimmed_word_x=this.WORDS_TO_MATCH[untrimmed_index_x].word;console.log('Horizontal match for "'+
untrimmed_word_x+
'" on row '+(i+1)+
' starting at letter #'+
(index_of_word+1));this.found_word(i,index_of_word,untrimmed_word_x.length,'row','#54A9CC');this.remove_word_from_list(word_id_x,i,index_of_word);x--;}}
for(var y=0;y<this.WORDS_TO_MATCH_TRIMMED.length;y++){var word_y=this.WORDS_TO_MATCH_TRIMMED[y].word;var word_id_y=this.WORDS_TO_MATCH_TRIMMED[y].id;var word_reversed=word_y.split('').reverse().join('');var index_of_word_reversed=this.WORD_GRID_ROWS[i].indexOf(word_reversed);if(-1!==index_of_word_reversed){var untrimmed_index_y=this.find_obj_in_arr(this.WORDS_TO_MATCH,'id',word_id_y);var untrimmed_word_y=this.WORDS_TO_MATCH[untrimmed_index_y].word;console.log('Horizontal match (reversed) for "'+
untrimmed_word_y+
'" on row '+
(i+1)+
' ending at letter #'+
(index_of_word_reversed+1));this.found_word(i,index_of_word_reversed,untrimmed_word_y.length,'row','#54A9CC');this.remove_word_from_list(word_id_y,i,index_of_word_reversed);y--;}}}};WordSearch.prototype.search_column=function(){for(var i=0;i<this.WORD_GRID_ROWS[0].length;i++){var column_string='';for(var x=0;x<Object.keys(this.WORD_GRID).length;x++){column_string+=this.WORD_GRID[x][i];}
for(var y=0;y<this.WORDS_TO_MATCH_TRIMMED.length;y++){var word_y=this.WORDS_TO_MATCH_TRIMMED[y].word;var word_id_y=this.WORDS_TO_MATCH_TRIMMED[y].id;var index_of_word=column_string.indexOf(word_y);if(-1!==index_of_word){var untrimmed_index_y=this.find_obj_in_arr(this.WORDS_TO_MATCH,'id',word_id_y);var untrimmed_word_y=this.WORDS_TO_MATCH[untrimmed_index_y].word;console.log('Vertical match for "'+
untrimmed_word_y+
'" on row '+
(index_of_word+1)+
' starting at letter #'+
(i+1));this.found_word(index_of_word,i,untrimmed_word_y.length,'column','#EEEEEE');this.remove_word_from_list(word_id_y,index_of_word,i);y--;}}
for(var z=0;z<this.WORDS_TO_MATCH_TRIMMED.length;z++){var word_z=this.WORDS_TO_MATCH_TRIMMED[z].word;var word_id_z=this.WORDS_TO_MATCH_TRIMMED[z].id;var word_reversed=word_z.split('').reverse().join('');var index_of_word_reversed=column_string.indexOf(word_reversed);if(-1!==index_of_word_reversed){var untrimmed_index_z=this.find_obj_in_arr(this.WORDS_TO_MATCH,'id',word_id_z);var untrimmed_word_z=this.WORDS_TO_MATCH[untrimmed_index_z].word;console.log('Vertical match (reversed) for "'+
untrimmed_word_z+
'" on row '+
(index_of_word_reversed+1)+
' ending at letter #'+
(i+1));this.found_word(index_of_word_reversed,i,untrimmed_word_z.length,'column','#EEEEEE');this.remove_word_from_list(word_id_z,index_of_word_reversed,i);z--;}}}};WordSearch.prototype.search_diagonal=function(){if(this._MAX_DIAGONAL_LENGTH<this._LENGTH_OF_SHORTEST_WORD){console.log('Not enough space to search diagonally.');return;}
for(var i=0;i<Object.keys(this.WORD_GRID).length;i++){for(var x=0;x<this.WORD_GRID[i].length;x++){var diagonal_right_string='';var diagonal_left_string='';var search_length=0;if(this._GRID_ROW_LENGTH-x>=this._LENGTH_OF_LONGEST_WORD&&this._GRID_ROW_COUNT-i>=this._LENGTH_OF_LONGEST_WORD){search_length=this._LENGTH_OF_LONGEST_WORD;}else if(this._GRID_ROW_LENGTH-x>=this._LENGTH_OF_SHORTEST_WORD&&this._GRID_ROW_COUNT-i>=this._LENGTH_OF_SHORTEST_WORD){search_length=Math.min(this._GRID_ROW_LENGTH-x,this._GRID_ROW_COUNT-i);}
if(search_length>0){for(var y=0;y<search_length;y++){diagonal_right_string+=this.WORD_GRID[i+y][x+y];}
for(var z=0;z<this.WORDS_TO_MATCH_TRIMMED.length;z++){var word_z=this.WORDS_TO_MATCH_TRIMMED[z].word;var word_id_z=this.WORDS_TO_MATCH_TRIMMED[z].id;var index_of_right_word=diagonal_right_string.indexOf(word_z);if(-1!==index_of_right_word){var untrimmed_index_z=this.find_obj_in_arr(this.WORDS_TO_MATCH,'id',word_id_z);var untrimmed_word_z=this.WORDS_TO_MATCH[untrimmed_index_z].word;console.log('Diagonal match (down and right) for "'+
untrimmed_word_z+
'" on row '+
(i+1+index_of_right_word)+
' starting at letter #'+
(x+1+index_of_right_word));this.found_word(i+index_of_right_word,x+index_of_right_word,untrimmed_word_z.length,'diagonal-right','#DB2406');this.remove_word_from_list(word_id_z,i+index_of_right_word,x+index_of_right_word);z--;}}
for(var d=0;d<this.WORDS_TO_MATCH_TRIMMED.length;d++){var word_d=this.WORDS_TO_MATCH_TRIMMED[d].word;var word_id_d=this.WORDS_TO_MATCH_TRIMMED[d].id;var right_word_reversed=word_d.split('').reverse().join('');var index_of_right_word_reversed=diagonal_right_string.indexOf(right_word_reversed);if(-1!==index_of_right_word_reversed){var untrimmed_index_d=this.find_obj_in_arr(this.WORDS_TO_MATCH,'id',word_id_d);var untrimmed_word_d=this.WORDS_TO_MATCH[untrimmed_index_d].word;console.log('Diagonal match (reversed, down and right) for "'+
untrimmed_word_d+
'" on row '+
(i+1+index_of_right_word_reversed)+
' ending at letter #'+
(x+1+index_of_right_word_reversed));this.found_word(i+index_of_right_word_reversed,x+index_of_right_word_reversed,untrimmed_word_d.length,'diagonal-right','#DB2406');this.remove_word_from_list(word_id_d,i+index_of_right_word_reversed,x+index_of_right_word_reversed);d--;}}}
search_length=0;if(x>=this._LENGTH_OF_LONGEST_WORD&&this._GRID_ROW_COUNT-i>=this._LENGTH_OF_LONGEST_WORD){search_length=this._LENGTH_OF_LONGEST_WORD;}else if(x>=this._LENGTH_OF_SHORTEST_WORD&&this._GRID_ROW_COUNT-i>=this._LENGTH_OF_SHORTEST_WORD){search_length=Math.min(x,this._GRID_ROW_COUNT-i);}
if(search_length>0){for(var q=0;q<search_length;q++){diagonal_left_string+=this.WORD_GRID[i+q][x-q];}
for(var w=0;w<this.WORDS_TO_MATCH_TRIMMED.length;w++){var word_w=this.WORDS_TO_MATCH_TRIMMED[w].word;var word_id_w=this.WORDS_TO_MATCH_TRIMMED[w].id;var index_of_left_word=diagonal_left_string.indexOf(word_w);if(-1!==index_of_left_word){var untrimmed_index_w=this.find_obj_in_arr(this.WORDS_TO_MATCH,'id',word_id_w);var untrimmed_word_w=this.WORDS_TO_MATCH[untrimmed_index_w].word;console.log('Diagonal match (reversed, down and left) for "'+
untrimmed_word_w+
'" on row '+
(i+1+index_of_left_word)+
' starting at letter #'+
(x+1-index_of_left_word));this.found_word(i+index_of_left_word,x-index_of_left_word,untrimmed_word_w.length,'diagonal-left','#DB2406');this.remove_word_from_list(word_id_w,i+index_of_left_word,x-index_of_left_word);w--;}}
for(var v=0;v<this.WORDS_TO_MATCH_TRIMMED.length;v++){var word_v=this.WORDS_TO_MATCH_TRIMMED[v].word;var word_id_v=this.WORDS_TO_MATCH_TRIMMED[v].id;var left_word_reversed=word_v.split('').reverse().join('');var index_of_left_word_reversed=diagonal_left_string.indexOf(left_word_reversed);if(-1!==index_of_left_word_reversed){var untrimmed_index_v=this.find_obj_in_arr(this.WORDS_TO_MATCH,'id',word_id_v);var untrimmed_word_v=this.WORDS_TO_MATCH[untrimmed_index_v].word;console.log('Diagonal match (down and left) for "'+
untrimmed_word_v+
'" on row '+
(i+1+index_of_left_word_reversed)+
' starting at letter #'+
(x+1-index_of_left_word_reversed));this.found_word(i+index_of_left_word_reversed,x-index_of_left_word_reversed,untrimmed_word_v.length,'diagonal-left','#DB2406');this.remove_word_from_list(word_id_v,i+index_of_left_word_reversed,x-index_of_left_word_reversed);v--;}}}}}};WordSearch.prototype.create_display=function(){var table_html='',list_html='';table_html+='<table><tr><th class="table_header"></th>';for(var i=1;i<=this._GRID_ROW_LENGTH;i++){table_html+='<th class="table_header">'+i+'</th>';}
table_html+='</tr>';jQuery.each(this.WORD_GRID,function(x,row){table_html+='<tr><th class="table_header">'+(parseInt(x)+1)+'</th>';jQuery.each(row,function(y,letter){table_html+='<td class="table_data">'+letter+'</td>';});table_html+='</tr>';});table_html+='</table>';jQuery('#word_table_container').html(table_html);list_html+='Searched For:<br><a href="#" onclick="$(\'#ol_bad_words\').show();return false">Show "bad word" list</a><ol id="ol_bad_words" style="margin-top:5px;display:none">';for(var y=0;y<this.WORDS_TO_MATCH.length;y++){list_html+='<li><span>'+this.WORDS_TO_MATCH[y].word+'</span></li>';}
list_html+='</ol>';jQuery('#word_list_container').html(list_html);};WordSearch.prototype.update_form_file=function(files,self){if('undefined'!==typeof(files[0])){var file=files[0];var new_file_name=file.name;var file_form=jQuery('#word_search_form_file_upload')[0];jQuery('.file_upload_input label[for="word_search_form_file_upload"]').html(new_file_name);self.UPLOADED_FILE_OBJ=file;}};WordSearch.prototype.change_form_display=function(e){var self=e.data.self;var new_method=e.currentTarget.value;self.clear_alerts();if('upload'===new_method){jQuery('#form_manual_method').hide();jQuery('#form_upload_method').show();}else if('manual'===new_method){jQuery('#form_upload_method').hide();jQuery('#form_manual_method').show();}};WordSearch.prototype.draggable_exists=function(){var div=document.createElement('div');var draggable='draggable'in div;var drag_start_and_drop=('ondragstart'in div&&'ondrop'in div);var file_reader='FileReader'in window;var form_data='FormData'in window;if((draggable||drag_start_and_drop)&&file_reader&&form_data){return true;}else{return false;}};WordSearch.prototype.clear_alerts=function(){jQuery('#word_search_form label').removeClass('error');jQuery('#word_search_form #alert_area').hide();jQuery('#word_search_form #alert_list').html('');};WordSearch.prototype.jump_to_id=function(id){if(''!==id){var valid_id=id.replace(/^(#)*/,'');window.location.hash='';window.location.hash=valid_id;}};